<!--# 引言
## 编写目的
必要性和可行性陈述。例如：为了使本项目供需双方对项目涉及的业务内容和要求有一个共同的理解，使之作为工作的前提和基础，特编写本文档，内容包括功能需求等，供用户方评审，作为供开发、测试人员的原始依据，并作为产品验收确认的依据。

## 本文读者
读者对象包括系统分析员、设计人员、程序编码人员、程序测试人员、xx用户。

## 待开发系统软件的名称
XX公司客户关系管理系统

## 系统需求提出者
XX公司

## 系统设计开发者
CrazyBunQnQ

## 系统最终用户
XX公司

## 定义与缩写
系统用户：XX公司员工。
客户：购买XX公司产品或有意向购买XX公司产品的单位客户，不包括个人客户

<br/>

# 概述
## 用户现状

**∆ 用户的简单工作流程**

## 系统现状
用户暂无系统

<br/>

# 流程分析

## 概述

## 子流程一

### 流程描述

### 流程图
![流程图](http://wx3.sinaimg.cn/mw690/a6e9cb00ly1fh33nik8foj20re0uqk0x.jpg)

<br/>
-->
# 功能需求

## 一、系统管理

### 1.1 部门管理

部门管理模块主要维护XX公司的部门机构，支持向部门中添加员工和把员工移出此部门。通过部门管理功能，可建立系统统一的部门信息便于数据汇总及统计分析。

- 操作权限：具有此操作权限的系统用户(一般为管理员、人力总监、人力专员、部门经理等)
- 查询权限：具有查询权限的系统用户

**主要功能：**
- **部门列表**：部门列表要分页显示部门名称，部门负责人，部门职能，人员设置；要显示总记录数和总页数，每页显示部门数目可选择指定；跳转到下一页时可携带搜索条件。注：不同查询权限的系统用户看到的数据不同，可在“查询权限组”中指定。
- **部门搜索**：可按部门名称搜索，可清空搜索条件。
- **部门新建**：创建部门内容包括部门名称（必填）、上级部门（必选）、部门负责人（必填）、部门职能、备注。
- **部门修改**：部门信息可回显，可修改。
- **部门删除**：删除部门前要判断部门是否可删。判断条件此部门下是否有部门，是否有员工。
- **树形显示部门**：树形显示部门结构。
- **导出报表**：可导出部门所有记录，当前页面记录，导出选中记录。
- **设置部门人员**：要显示没有部门的员工和当前部门的员工，此功能可把没有部门的员工移入此部门，也可以把此部门的员工移出此部门。

### 1.2 人事管理

人事管理模块主要维护XX公司的系统用户的帐号及相关基本信息，并可以指定系统用户的操作权限组（操作权限角色），查询权限组（查询权限角色），部门，状态（启用或禁用）。

- 操作权限：具有此操作权限的系统用户(一般为管理员、人力总监、人力专员)
- 查询权限：不涉及

**主要功能：**
- **人员列表**：人员列表要分页显示用户名，中文名，操作权限组，查询权限组，所属部门，起始有效期，终止有效期，状态；要显示总记录数和总页数，每页显示人员数目可选择指定；跳转到下一页时可携带搜索条件。
- **人员搜索**：可按用户名、中文名搜索，可清空搜索条件。
- **人员新建**：创建人员（系统用户）包括基本信息、详细信息、职业技能、其他信息四部分信息。
    - 基本信息包括用户名（必填）、中文名（必填）、密码（必填）、推荐人、移动电话、电子邮件、家庭地址、家庭电话、现住宅地址、现住宅电话、身份证号码、社会保险号、紧急联系人、紧急联系电话、起始有效期、终止有效期、操作权限组（必选）、查询权限组（必选）、所属部门（必选）、状态（必选）。
    - 详细信息包括性别、出生日期、职员类别、职务、入职时间、最高学历、毕业学校、毕业时间、配偶姓名、子女姓名、办公电话、配偶电话、业余爱好、配偶工作单位、备注。
    - 职业技能包括偏好特长、信息沟通、培训情况、组织能力、分析能力、计划能力、人员开发、人际关系。
    - 其他信息包括创建人、创建日期、修改人、修改日期。
- **人员修改**：人员信息可回显，可修改。
- **人员删除**：删除人员。
- **帐号的启用、停用**：可把帐号设置为启用状态或停用状态。处于启用状态的帐号可登录，处于停用状态的帐号不能登录此系统。
- **导出报表**：可导出人员的所有记录，当前页面记录，导出选中记录。

### 1.3 操作权限组

操作权限组模块主要管理此系统中不同角色的系统用户的操作权限。也就是说不同操作权限角色的系统用户能操作的模块是不同的。

- 操作权限：管理员
- 查询权限：管理员

**主要功能：**
- **（操作权限）角色列表**：角色列表要分页显示角色名称，权限设置；要显示总记录数和总页数，每页显示角色数目可选择指定；跳转到下一页时可携带搜索条件。
- **（操作权限）角色搜索**：可按角色名称搜索，可清空搜索条件。
- **（操作权限）角色新建**：创建角色内容包括角色名称（必填）、备注。
- **（操作权限）角色修改**：角色信息可回显，可修改。
- **（操作权限）角色删除**：删除角色前要判断角色是否可删。判断条件此角色下是否有系统用户。
- **导出报表**：可导出所有记录，当前页面记录，导出选中记录。
- **设置（操作权限）角色操作权限**：显示所有的操作权限，并显示当前角色所拥有的权限，可修改当前角色的权限。

### 1.4 查询权限组

查询权限组模块主要管理此系统中不同（查询权限）角色的系统用户的查询权限。此处可设置不同查询权限角色的系统用户能看到的部门是不同的。
- 操作权限：管理员
- 查询权限：管理员

**主要功能：**
- **（查询权限）角色列表**：角色列表要分页显示编号，名称，可查看范围设置；要显示总记录数和总页数，每页显示角色数目可选择指定；跳转到下一页时可携带搜索条件。
- **（查询权限）角色搜索**：可按角色名称搜索，可清空搜索条件。
- **（查询权限）角色新建**：创建角色内容包括角色名称（必填）、备注。
- **（查询权限）角色修改**：角色信息可回显，可修改。
- **（查询权限）角色删除**：删除角色前要判断角色是否可删。判断条件此角色下是否有系统用户。
- **导出报表**：可导出所有记录，当前页面记录，导出选中记录。
- **设置（查询权限）角色可查看的范围**：显示所有的部门，并显示当前角色可查看的部门，可修改当前角色的权限(这里指可查看的部门)。

## 二、客户管理

### 2.1 客户拜访

客户拜访模块主要管理所有客户。
- 操作权限：具有此操作权限的系统用户(管理员、业务员)
- 查询权限：管理员可以看到全部客户。业务员看到自己的客户和共享的客户。

**主要功能：**
- **客户列表**：客户列表要分页显示客户名称，客户性质，客户等级，电话，电子邮件，最后联系时间，联系人,联系记录；要显示总记录数和总页数，每页显示客户数目可选择指定；跳转到下一页时可携带搜索条件。注：不同查询权限的系统用户看到的数据不同，管理员可以看到全部客户。业务员看到自己的客户和共享的客户。
- **客户筛选**：可按“今天需要联系的客户”,“已过期未联系的客户”,“全部客户”三个条件筛选客户。
- **客户搜索**：可按客户编码、客户名称、拼音码、电话、所属人部门（下拉菜单）、所属人（下拉菜单，与部门级联）、客户等级（下拉菜单）、客户来源（下拉菜单）、客户性质（下拉菜单）、区域名称（下拉菜单）、手机、所属行业（下拉菜单）、公司规模（下拉菜单）、传真、邮政编码、省份（下拉菜单）、城市（下拉菜单，与省份级联）、电子邮件、公司网址、电话二、事实客户（“是”或“否”可选）搜索，可清空搜索条件。
- **客户新建**：创建客户内容包括包括基本信息、企业信息、自定义信息、其他信息四部分信息。
    - 基本信息包括客户编码、客户名称（必填）、拼音码、客户等级(可选)、区域名称(可选)、客户来源(可选)、所属行业(可选)、公司规模(可选)、传真、邮政编码、省份(可选)、城市(可选)、联系地址、电子邮件、公司网址、电话一、电话二、手机、事实客户（“是”或“否”可选）、下次联系时间（可选）、客户性质（可选）、备注。
    - 企业信息包括经营范围（可选）、企业性质、法人代表、注册资金、开户银行、银行账户、公司税号。
    - 自定义信息包括客户需求1、客户需求2、客户需求3、客户需求4、自定选项1、自定选项2、自定选项3、自定选项4、自定时间1、自定时间2。
    - 其他信息包括创建人、创建日期、修改人、修改日期、所属人。
    >注：客户由哪个系统用户创建，客户的所属人就为哪个系统用户。
- **客户修改**：客户信息可回显，可修改。注：管理员能修改所有管户，其他系统用户只能修改自己的客户。
- **客户删除**：删除客户前要判断部门是否可删。注：管理员能删除所有管户，其他系统用户只能删除自己的客户。
- **下次联系时间**：批量设置客户联系时间。注：只能设置自己的客户，不能设置共享客户的下次联系时间。
- **共享**：可以把自己的客户设置为共享状态。此状态其他人也能看到，但不能修改等。注：管理员也也可以操作。
- **取消共享**：可以把自己的处于共享状态的客户取消共享状态。注：管理员也也可以操作。
- **经手人变更**：管理员可以把客户所属人改为其他系统用户。
- **查看联系人**：每个客户信息后面有查看联系人的按钮，点击可查看此客户的联系人列表。联系人列表页面主要功能包括：联系人列表，联系人搜索,联系人新建，联系人修改，联系人删除，导出报表。
- **联系人列表**：要分页显示姓名、性别、手机、客户名称、部门、职务、电子邮件、办公电话；要显示总记录数和总页数，每页显示联系人数目可选择指定。
- **联系人新建**：创建联系人内容包括包括基本信息、自定义信息、其他信息三部分信息。
    - 基本信息包括姓名、性别（“男”或“女”可选）、编码、拼音码、出生日期（可选）、传真、部门、职务、办公电话、家庭电话、手机、主联系人（“是”或“否”可选）、电子邮件、邮政编码、QQ号、QQ昵称、联系地址、其他联系、爱好、忌讳、备注。
    - 自定义信息包括自定义1、自定义2、自定义3、自定义4、自定选项1、自定选项2、自定选项3、自定选项4、自定时间1、自定时间2。
    - 其他信息包括创建人、创建日期、修改人、修改日期、所属人。
    >注：联系人由哪个系统用户创建，联系人的所属人就为哪个系统用户。
- **查看联系记录**：每个客户信息后面有查看联系记录的按钮，点击可查看此客户的联系记录列表。联系记录列表主要功能包括：联系记录列表，联系记录搜索,联系记录新建，联系记录修改，联系记录删除，导出报表。
- **联系记录列表**：要分页显示联系记录内容、联系时间、联系人、联系方式、业务员、下次联系时间；要显示总记录数和总页数，每页显示联系记录数目可选择指定。
- **联系记录新建**：创建联系记录内容包括基本信息、其他信息两部分信息。
    - 基本信息包括联系人（可选）、联系方式（可选）、联系时间（可选）、联系类别（可选）、联系记录内容、下次联系时间（可选）、业务员（登录系统的系统用户）、下次联系目标、备注。
    - 其他信息包括创建人、创建日期、修改人、修改日期、所属人。
    >注：联系记录由哪个系统用户创建，联系记录的所属人就为哪个系统用户。
- **导出报表**：可导出客户所有记录，当前页面记录，导出选中记录。

### 2.2 联系人列表

联系人列表模块主要管理所有联系人。
- 操作权限：具有此操作权限的系统用户(管理员、业务员)
- 查询权限：管理员可以看到全部联系人。业务员看到自己的联系人。

**主要功能：**
- **联系人列表**：联系人列表要分页显示姓名、性别、手机、客户名称、部门、职务、电子邮件、办公电话；要显示总记录数和总页数，每页显示联系人数目可选择指定；跳转到下一页时可携带搜索条件。注：不同查询权限的系统用户看到的数据不同，管理员可以看到全部联系人。业务员看到自己的联系人。
- **联系人搜索**：可按姓名、部门（下拉菜单）、家庭电话、职务、qq昵称、办公电话、电子邮件、所属人（下拉菜单）、手机搜索，可清空搜索条件。
- **联系人修改**：联系人信息可回显，可修改。注：管理员能修改所有联系人，其他系统用户只能修改自己的联系人。
- **联系人删除**：删除联系人前要判断联系人是否可删。
- **导出报表**：可导出联系人所有记录，当前页面记录，导出选中记录。

### 2.3 联系记录列表

联系记录列表模块主要管理所有联系记录。
- 操作权限：具有此操作权限的系统用户(管理员、业务员)
- 查询权限：管理员可以看到全部联系记录。业务员看到自己的联系记录。

**主要功能：**
- **联系记录列表**：联系记录列表要分页显示联系记录内容、联系时间、联系人、联系方式、业务员、下次联系时间；按联系时间排序；要显示总记录数和总页数，每页显示联系记录数目可选择指定；跳转到下一页时可携带搜索条件。注：不同查询权限的系统用户看到的数据不同，管理员可以看到全部联系记录。业务员看到自己的联系记录。
- **联系记录搜索**：可按联系人、联系方式、联系类别、业务员、下次联系目标、联系记录、业务员部门（下拉菜单）、联系时间（下拉菜单）搜索，可清空搜索条件。
- **联系记录修改**：联系记录信息可回显，可修改。注：管理员能修改所有联系记录，其他系统用户只能修改自己的联系记录。
- **联系记录删除**：删除联系记录。
- **导出报表**：可导出联系记录所有记录，当前页面记录，导出选中记录。

## 三、销售管理

### 3.1 商品类别

- 操作权限：具有此操作权限的系统用户
- 查询权限：无

**主要功能：**
- **商品类别列表**：商品类别列表要分页显示商品类别名称，商品类别编码，上一级商品类别，备注；要显示总记录数和总页数，每页显示商品类别数目可选择指定；跳转到下一页时可携带搜索条件。
- **商品类别搜索**：可按商品类别名称、商品类别编码搜索，可清空搜索条件。
- **商品类别新建**：创建商品类别内容包括商品类别名称（必填）、商品类别编码、上一级商品类别（必选）、备注。
- **商品类别修改**：商品类别信息可回显，可修改。
- **商品类别删除**：删除商品类别前要判断商品类别是否可删。判断条件此商品类别下是否有商品类别，是否有商品。
- **树形显示商品类别**：树形显示商品类别结构。
- **导出报表**：可导出所有记录，当前页面记录，导出选中记录。

### 3.2 商品资料

商品资料模块主要是对商品的管理
- 操作权限：具有此操作权限的系统用户
- 查询权限：无

**主要功能：**
- **商品列表**：商品列表要分页显示商品名称，商品编码，商品类别，型号，规格，尺寸，库存数量，单价；要显示总记录数和总页数，每页显示商品数目可选择指定；跳转到下一页时可携带搜索条件。
- **商品搜索**：可按商品名称、商品编码、拼音码、商品类别、供应商、单价搜索，可清空搜索条件。
- **商品新建**：创建商品内容包括包括基本信息、自定义信息、其他信息三部分信息。
    - 基本信息包括商品名称（必填）、商品类别（必选）、商品编码、拼音码、型号、规格、单位、颜色、尺寸、条形码、供应商、商品库存、单价、采购价、商品图片（可预览）、备注；
    - 自定义信息包括自定义1、自定义2、自定义3、自定义4、自定选项1、自定选项2、自定选项3、自定选项4、自定时间1、自定时间2。
    - 其他信息包括创建人、创建日期、修改人、修改日期、所属人。
- **商品修改**：商品信息可回显，可修改。
- **商品删除**：删除商品前要判断商品是否可删。
- **导出报表**：可导出商品所有记录，当前页面记录，导出选中记录。

### 3.3 销售单

销售单模块主要管理销售单的录入、修改、提交和审核。销售单状态有草稿、待审核、已审核、已驳回。
- 主要流程为：业务员新建销售单,此时为草稿状态；业务员提交后，销售单变为待审核状态；业务经理审核通过，销售单变为已审核状态（<font color="red">此时会创建一条“草稿”状态的销售收款记录</font>），审核不通过销售单变为已驳回状态。
- 操作权限：具有此操作权限的系统用户(一般为管理员、业务员、业务经理)
- 查询权限：管理员可以看到全部销售单。业务员看到自己的销售单。业务经理能看到本部门的销售单。

**主要功能：**
- **销售单列表**：销售单列表要分页显示销售单号、开单日期、客户名称、业务员、合计、整单打折、应收金额、审核人、单据状态；要显示总记录数和总页数，每页显示销售单数目可选择指定；跳转到下一页时可携带搜索条件。
- **销售单筛选**：可按“草稿”、“待审核”、“已审核”、“已驳回”、“全部”筛选销售单。
- **销售单搜索**：可按销售单号、业务员（可选）、客户名称搜索，可清空搜索条件。
>注：不同角色的人看到的业务员范围不同。管理员可以看到所有的业务员；业务经理能看到本部门的业务员；业务员只能看到自己。

- **销售单新建**：创建销售单包括基本信息、自定义信息、其他信息三部分信息。创建销售单之后可以创建销售单明细。(此时销售单为草稿状态)
    - 基本信息包括销售单号（自动创建,回显）、开单日期（必选）、客户名称（必选）、业务员（必选，不同角色的人选择范围不同）、联系人（可选）、联系电话、送货地址、备注。
    - 自定义信息包括自定义1、自定义2、自定义3、自定义4、自定选项1、自定选项2、自定选项3、自定选项4、自定时间1、自定时间2。
    - 其他信息包括创建人、创建日期、修改人、修改日期。
- **销售单明细新建**：创建销售单明细内容包括产品名称（必选）、规格、单位、数量、单价、折扣、金额、备注。
>注：规格、单位、单价都是通过产品名称自动回填；数量默认为1，可修改；折扣默认为100%，可修改；金额=单价*数量*折扣。

- **销售单修改、提交、审核和驳回**：根据销售单不同的状态和不同系统用户显示不同的功能按钮。
    - “保存”：保存修改后销售单信息。
    - “删除”：删除销售单。
    - “返回”：返回销售单列表页面。
    - “提交”：“草稿”状态的销售单提交后变为“待审核”状态。
    - “审核”：“待审核”状态的销售单通过审核变为“已审核”状态。
    - “驳回”：“待审核”状态的销售单没有通过审核变为“已驳回”状态。
    >如果销售单没有明细或是总金额为0，则只能“保存”、“删除”、“返回”。

    >如果销售单有明细，总金额大于0，且销售单状态为“草稿”状态，则只能“保存”、“提交”、“返回”。

    >如果销售单有明细，总金额大于0，且销售单状态为“待审核”状态，业务员只能“返回”，业务经理只能“审核”、“驳回”、“返回”。

    >如果销售单状态为“已审核”或“已驳回”状态，则只能“返回”。

- **销售单删除**：删除删除销售单前要判断删除销售单是否可删。判断条件销售单没有明细或是总金额为0。
- **导出报表**：可导出销售单的所有记录，当前页面记录，导出选中记录。

### 3.4 销售收款

销售收款模块主要管理销售收款的修改，提交和审核。销售收款状态有草稿、待审核、已审核、已驳回。
- 主要流程为：在销售单模块，销售单经审核通过会创建一条“草稿”状态的销售收款记录；业务员提交后，销售收款变为待审核状态；业务经理审核通过销售收款变为已审核状态(<font color="red">此时会创建一条“未收款”状态的应收款项记录</font>)，审核不通过销售收款变为已驳回状态。
- 操作权限：具有此操作权限的系统用户(一般为管理员、业务员、业务经理)
- 查询权限：管理员可以看到全部销售收款。业务员看到自己的销售收款。业务经理能看到本部门的销售收款。

**主要功能：**
- **销售收款列表**：销售收款列表要分页显示收款单号、收款日期、客户名称、总金额、经手人、单据状态；要显示总记录数和总页数，每页显示销售收款数目可选择指定；跳转到下一页时可携带搜索条件。
- **销售收款筛选**：可按“草稿”、“待审核”、“已审核”、“已驳回”、“全部”筛选销售收款。
- **销售收款搜索**：可按客户名称、收款单号、收款时间、经手人。注：不同角色的人看到的经手人范围不同。管理员可以看到所有的业务员（经手人）；业务经理能看到本部门的业务员（经手人）；业务员只能看到自己。
- **销售收款修改、提交、审核和驳回**：根据销售收款不同的状态和不同系统用户显示不同的功能按钮。
    - “保存”：保存修改后销售收款信息。
    - “返回”：返回销售收款列表页面。
    - “提交”：“草稿”状态的销售收款提交后变为“待审核”状态。
    - “审核”：“待审核”状态的销售收款通过审核变为“已审核”状态。
    - “驳回”：“待审核”状态的销售收款没有通过审核变为“已驳回”状态。
    
    >销售收款状态为“草稿”状态，则只能“保存”、“提交”、“返回”。

    >销售收款状态为“待审核”状态，业务员只能“返回”，业务经理只能“审核”、“驳回”、“返回”。

    >如果销售收款状态为“已审核”或“已驳回”状态，则只能“返回”。
- **导出报表**：可导出销售收款的所有记录，当前页面记录，导出选中记录。

### 3.5 应收款项

应收款项模块主要管理应收款项的管理。应收款项状态有未收款、收款中、已收款,应收款项是否结清有两种状态--未结清、已结清。
- 主要流程为：财务人员可以进入修改页面，填写收款信息（即已支付payed字段）；当已支付等于应收款（应收款total-已支付payed=应收款余额balance），表示销售款已全部收回，此时要修改应收款项的状态为“已收款”，是否结清(over_flag)为“已结清”。
- 操作权限：具有此操作权限的系统用户(一般为财务)
- 查询权限：不涉及

**主要功能：**
- **应收款项列表**：应收款项列表要分页显示销售单号、客户名称、产生日期、应收金额、已收金额、应收余额、是否完成、所属人、收款状态；要显示总记录数和总页数，每页显示应收款项数目可选择指定；跳转到下一页时可携带搜索条件。
- **应收款项筛选**：可按“未结清”、“已结清”筛选应收款项。
- **应收款项搜索**：可按销售单号、客户名称、产生日期、所属人、客户省份（下拉菜单）、客户城市（下拉菜单，与省份级联）、客户区域名称搜索（下拉菜单），可清空搜索条件。
- **应收款项修改**：修改收款信息，当已支付大于0，状态为“收款中”；当已支付等于应收款，应收款项的状态为“已收款”，是否结清为“已结清”。
- **导出报表**：可导出应收款项的所有记录，当前页面记录，导出选中记录。